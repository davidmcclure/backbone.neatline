Backbone.Neatline=function(e,t,n){var r={};return r.Collection=e.Collection.extend({update:function(e,t){e=e||{},this.fetch({data:n.param(e),success:t})},getOrFetch:function(e,t){var n=this.get(e);n?t(n):(n=new this.model({id:e}),n.fetch({success:function(){t(n)}}))}}),r.SyncCollection=r.Collection.extend({constructor:function(){var n=Array.prototype.slice.apply(arguments);e.Collection.prototype.constructor.apply(this,n),this.model.prototype.bind("change",t.bind(function(e){this.updateModel(e.toJSON())},this))},updateModel:function(e){var t=this.get(e.id);t&&t.set(e,{silent:!0})}}),r.View=e.View.extend({getTemplate:function(){if(!this.template)return;this.$el.append(t.template(n(this.template).html()))},getUi:function(){this.__ui=n.extend(!0,{},this.ui),t.bind(function e(n){t.each(n,t.bind(function(r,i){typeof r=="string"?n[i]=this.$(r):typeof r=="object"&&t.bind(e,this)(r)},this))},this)(this.__ui)}}),r}(Backbone,_,$||window.jQuery||window.Zepto||window.ender);